 //TIE@FY3
#include <ansi.h>
#include <weapon.h>
inherit BLADE;
void create()
{
        set_name(HIC"圆月弯刀"NOR, ({ "moonblade" }) );
        set_weight(7000);
        if( clonep() )
                set_default_object(__FILE__);
        else {
                set("unit", "把");
                set("long", "这是一把形状很奇特的刀，刀身仿佛有点弯曲。\n");
                set("value", 400);
                set("material", "steel");
                set("wield_msg", "$N的$n突然出鞘，你根本就没有看见$N拔刀！\n");
                set("unwield_msg", "$N的$n已入鞘。\n");
                set("for_modao",1);
        }
        ::init_blade(25);
} 
mixed hit_ob(object me, object victim, int damage_bonus)
{
        int badint = 0;
		int bonus;
        if(random(damage_bonus) < 250 ) return 0;
		bonus = (int)me->query("combat_exp")/5000000;
		if(bonus < 1) bonus = 1;
        badint = me->query_skill("blade");
//      if(badint && !victim->query_temp("weapon")) 
//      && victim->query_skill_mapped("unarmed") == "dragonstrike")
//      message_vision( HIR "$N人刀合一，手中的"+name()+ HIR "突然切入$n的破绽！\n"NOR,me,victim);
//        return badint;
        victim->receive_wound("qi",badint*bonus,me);
        return RED "$N人刀合一，手中的"+name()+NOR RED "突然切入$n"+NOR RED"的破绽！\n"NOR; 
}  
